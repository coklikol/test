<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Bot LIVE</title>
    <style>
        body { font-family: monospace; max-width: 900px; margin: 20px auto; padding: 20px; background: #1a1a1a; color: #fff; }
        #log { background: #000; padding: 20px; height: 500px; overflow-y: auto; font-size: 14px; white-space: pre-wrap; border-radius: 8px; }
        button { padding: 12px 24px; background: #0088cc; color: white; border: none; border-radius: 6px; cursor: pointer; margin: 5px; }
        button:hover { background: #006699; }
        .test-input { padding: 10px; background: #333; color: #fff; border: none; border-radius: 4px; width: 300px; }
    </style>
</head>
<body>
    <h1>üî¥ LIVE Telegram Bot Monitor</h1>
    <button onclick="startBot()">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
    <button onclick="testSend()">üì§ –¢–µ—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
    <br><input class="test-input" id="testMsg" value="–ü—Ä–∏–≤–µ—Ç —Å —Å–∞–π—Ç–∞!">
    
    <h3>üì° Live –ª–æ–≥:</h3>
    <div id="log">–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞...\n</div>

    <script>
        const TOKEN = '6639181665:AAF98IaosMehuMvoKy3vqw5KbudGw96R9jk';
        const API_URL = `https://api.telegram.org/bot${TOKEN}`;
        let offset = 0;
        let isRunning = false;

        function log(text, color = '#fff') {
            document.getElementById('log').innerHTML += 
                `%c${new Date().toLocaleTimeString()} ${text}\n`.replace(/</g,'&lt;');
            document.getElementById('log').scrollTop = 999999;
        }

        async function apiCall(method, params) {
            const response = await fetch(`${API_URL}/${method}`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(params)
            });
            return await response.json();
        }

        async function getUpdatesLoop() {
            try {
                const data = await apiCall('getUpdates', {offset, limit: 10, timeout: 30});
                
                log(`üì• –ü–æ–ª—É—á–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: ${data.result?.length || 0}`);
                
                if (data.ok && data.result) {
                    for (let update of data.result) {
                        offset = update.update_id + 1;
                        
                        if (update.message) {
                            const msg = update.message;
                            const from = msg.from?.first_name || msg.from?.username || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                            log(`üí¨ [${msg.chat.id}] ${from}: ${msg.text || '[–º–µ–¥–∏–∞]'}`, 
                                msg.from?.is_bot ? '#ffc107' : '#28a745');
                        }
                    }
                }
            } catch(e) {
                log(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, '#ff4444');
            }
            
            if (isRunning) setTimeout(getUpdatesLoop, 1000);
        }

        async function startBot() {
            isRunning = true;
            log('üöÄ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ó–ê–ü–£–©–ï–ù! –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É...', '#00ff88');
            getUpdatesLoop();
        }

        async function testSend() {
            const text = document.getElementById('testMsg').value;
            const data = await apiCall('sendMessage', {
                chat_id: 5407825036,
                text: `üåê Web: ${text}`
            });
            log(data.ok ? '‚úÖ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!' : `‚ùå ${data.description}`, 
                data.ok ? '#00ff88' : '#ff4444');
        }
    </script>
</body>
</html>
